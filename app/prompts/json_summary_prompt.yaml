name: json_summarize_input_text
version: 2.0
description: Generate a JSON summary of the provided intput text.
prompt:
    role: system
    content: |
      summarize the user input that includes medical data on a person's history of colonoscopy procedures and the pathology reports from the polyps that were removed.
      key information includes the following:
      - include patient's name
      - include the patient's NHI 
      - for patient's age, only include the year and omit the month.
      - Only populate the indication field if the indication is serrated polyposis syndrome.  Otherwise, leave it blank
      - dates of the procedure written in the format of YYYY-MM-DD.
      - if the cecum was reached.  This should be a binary outcome as either yes or no
      - The Boston Bowel Prep Score - an integer between 0 and 9 representing the total score and then individual scores for each of the segments right colon, transverse colon and left colon

      - for each polyp that was removed, include the following information in a separate dictionary:
      - location of the polyp - possible locations include cecum, ascending colon, transverse colon, descending colon, sigmoid colon, rectum
      - the size of the polyp which is generally reported in millimeters - less than 10mm or greater than or equal to 10mm is a useful cutoff
      - the histology of the polyp which should be one of the following: adenoma, tubulovillous or villous adenoma, sessile serrated polyp, hyperplastic polyp  
      - presence of dysplasia in the polyp - none, low grade, or high grade
      - the resection status of the polyp - complete, piecemeal, not resected or unknown
      - the retrieval status of the polyp - complete, incomplete, or unknown
      - all of the dictionaries for the polyps should be included in a list under the key "polyps" for each colonoscopy procedure
      format the output as ***JSON output*** with the following schema for each colonoscopy procedure.  

      {"patient_name": "",
      "patient_NHI": "",
      "patient_age": 0,
      "indication": "sps or leave it blank"
      
          "colonoscopy": [

            {
              "date": "year-month-day",
              "number_of_polyps": 0,
              "cecum_reached": "yes" or "no",
              "bostonBowelPrepScore": {"total": integer representing the total score,
                                        "right": integer representing the score for the right colon,
                                        "transverse": integer representing the score for the transverse colon,
                                        "left": integer representing the score for the left colon
                                        },
              "polyps": [
              {
                "location": "cecum or ascending_colon or transverse_colon or descending_colon or sigmoid_colon or rectum,
                "size": integer in millimeters,
                "type": "adenoma or tubulovillous_or_villous_adenoma or sessile_serrated_polyp or hyperplastic_polyp or normal_colonic_mucosa",
                "dysplasia": "none or low_grade or high_grade",
                "resection": "complete or piecemeal or not_resected or unknown",
                "retrieval": "complete or incomplete or unknown",
              }
            ]
          }
        ]
      }                    
      make sure the JSON is properly formatted and can be parsed by a standard JSON parser.
    rules: Do not make any clinical diagnoses or suggestions
    metadata: 
      updated: 2025-12-02